/* =========================================================
   Force Chatter to Bottom (Odoo 19)
   - Mantiene tu JS (isChatterAside="false")
   - Corrige layout XXL: quita hueco lateral y manda chatter abajo
   ========================================================= */

@media (min-width: 1534px) {

  /* 1) El contenedor del form en XXL suele ser flex.
        Nosotros NO cambiamos display (para no romper),
        solo forzamos wrap donde aplique. */
  .o_form_view.o_xxl_form_view,
  .o_form_view.o_xxl_form_view .o_form_renderer,
  .o_form_view.o_xxl_form_view .o_form_view_container {
    flex-wrap: wrap !important;
  }

  /* 2) Recupera 100% del ancho para el contenido del formulario.
        (Dependiendo build/tema, el “sheet” vive en uno u otro wrapper.) */
  .o_form_view.o_xxl_form_view .o_form_sheet_bg,
  .o_form_view.o_xxl_form_view .o_form_view_container,
  .o_form_view.o_xxl_form_view .o_form_sheet {
    flex: 1 1 100% !important;
    max-width: 100% !important;
    min-width: 0 !important;
  }

  /* 3) El chatter: forzarlo a ocupar fila completa y al final */
  .o_form_view.o_xxl_form_view .o_force_chatter_bottom,
  .o_form_view.o_xxl_form_view .o-mail-Form-chatter,
  .o_form_view.o_xxl_form_view .o-mail-ChatterContainer {
    /* que NO se oculte por reglas de aside */
    display: block !important;

    flex: 1 1 100% !important;
    max-width: 100% !important;
    width: 100% !important;

    order: 9999 !important;

    /* neutraliza comportamiento típico del aside */
    position: static !important;
    top: auto !important;
    height: auto !important;
    max-height: none !important;
    overflow: visible !important;
  }

  /* 4) Si Odoo/tema todavía le pega clase o-aside, la “anulamos” */
  .o_form_view.o_xxl_form_view .o_force_chatter_bottom.o-aside,
  .o_form_view.o_xxl_form_view .o-mail-Form-chatter.o-aside {
    position: static !important;
    width: 100% !important;
    max-width: 100% !important;
    border-left: none !important;
  }
}

/* Estética / separador (tu estilo original) */
.o_force_chatter_bottom {
  border-left: none !important;
  border-top: 1px solid var(--o-gray-300, #dee2e6) !important;
  margin-top: 16px !important;
  padding-top: 8px !important;
}
